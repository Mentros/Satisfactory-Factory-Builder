<div class="h-full flex flex-column m-2">
    <p-carousel [value]="machines" [circular]="false" [numVisible]="3" [numScroll]="3"
        [responsiveOptions]="responsiveOptions" [pt]="carouselPT">
        <ng-template let-machine #item>
            <div class="border-round m-2 p-2 shadow-4"
            draggable="true"
            (dragstart)="onDragStart($event, machine.id)"
                style="display: flex; flex-direction: column; align-items: center;">
                <div class="mb-4">
                    <div class="relative">
                        <img class="w-full h-full object-contain machineImg" [src]="getMachineImageSrc(machine.name)"
                            [alt]="machine.name" />
                        <p-tag [value]="machine.category" [severity]="getSeverity(machine.category)"
                            class="absolute dark:!bg-surface-900" [ngStyle]="{ 'left.px': 5, 'top.px': 5 }" />
                    </div>
                </div>
                <div class="mb-2 font-medium text-center"
                    style="font-family: 'Poppins', 'Quicksand', 'Nunito', 'Segoe UI', Arial, sans-serif; font-size: 1.25rem; letter-spacing: 0.025em;">
                    {{ machine.name }}
                </div>
                <div class="flex flex-row items-center justify-center flex-wrap">
                    @for (input of machine.buildRequirements; track input.item) {
                    <div class="relative flex flex-col items-center mr-2 mb-2 border-round shadow-2 p-1"
                        style="width:46px; height:46px; flex-shrink: 0;">
                        <img [src]="getIngredientImageSrc(input.item)" [alt]="input.item"
                            class="w-full h-full object-contain rounded border bg-surface-0 dark:bg-surface-800" />
                        <span
                            class="absolute inset-0 flex items-end justify-center text-xs font-semibold text-white pb-1"
                            style="text-shadow: 0 1px 2px #222;">
                            {{ input.amount }}
                        </span>
                    </div>
                    }
                </div>
            </div>
        </ng-template>
    </p-carousel>
    <div class="w-full flex-1 p-2 mb-2" style="min-height: 0;" 
         (dragover)="onDragOver($event)"
         (drop)="onDrop($event)">
        <sp-vis-network #visNetwork>
        </sp-vis-network>
    </div>
</div>