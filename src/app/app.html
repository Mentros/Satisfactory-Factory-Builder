@if (isBrowser) {
  <div class="flex h-full">
    <!-- Drawer Navigation -->
    <div 
      class="drawer-container fixed left-0 top-0 h-full border-right-1 z-5 flex flex-column overflow-hidden"
      [class.drawer-expanded]="drawerExpanded()"
      [class.drawer-collapsed]="!drawerExpanded()">
      <!-- Toggle Button - Always visible -->
      <div 
        class="drawer-toggle-container flex align-items-center border-bottom-1"
        [class.justify-content-center]="!drawerExpanded()"
        [class.justify-content-end]="drawerExpanded()"
        [class.p-2]="!drawerExpanded()"
        [class.p-3]="drawerExpanded()">
        <p-button 
          [icon]="drawerExpanded() ? 'pi pi-angle-left' : 'pi pi-angle-right'" 
          [rounded]="true"
          [text]="true"
          severity="secondary"
          (click)="toggleDrawer()"
          class="drawer-toggle-button">
        </p-button>
      </div>

      <!-- Menu Items -->
      <nav class="flex flex-column flex-1 overflow-auto py-2">
        @for (item of menuItems; track item.routerLink) {
          <a 
            [routerLink]="item.routerLink || ''"
            routerLinkActive="active"
            [title]="!drawerExpanded() ? item.label : ''"
            class="drawer-menu-item flex align-items-center border-round-md no-underline cursor-pointer gap-3"
            [class.justify-content-center]="!drawerExpanded()"
            [class.p-3]="drawerExpanded()"
            [class.px-2]="!drawerExpanded()"
            [class.mx-2]="drawerExpanded()"
            [class.m-1]="!drawerExpanded()">
            <i [class]="item.icon" class="menu-icon text-xl"></i>
            @if (drawerExpanded()) {
              <span class="menu-label text-sm">{{ item.label }}</span>
            }
          </a>
        }
      </nav>
    </div>

    <!-- Main Content Area -->
    <div 
      class="flex flex-column flex-grow-1 drawer-content"
      [style.margin-left]="drawerExpanded() ? '250px' : '60px'">
      <div class="flex-1 overflow-auto" style="min-height: 0;">
        <router-outlet />
      </div>
    </div>
  </div>
} @else {
  <div class="flex flex-column h-full">
    <div class="flex-grow-1 overflow-auto">
      <router-outlet />
    </div>
  </div>
}